<main class="main_innerlayout">
    <section>
        <div class="container resources_link">
            <ul class="nav nav-pills d-none d-lg-flex" id="myTab" role="tablist">
                <% 
                int tabIndex = 0;
                List<InfraKnowledgeCategory> ik = null;
                String tab = "";
                long cid = 0L;
                try {
                    ik = InfraKnowledgeCategoryLocalServiceUtil.getInfraKnowledgeCategories(0, InfraKnowledgeCategoryLocalServiceUtil.getInfraKnowledgeCategoriesCount());
                } catch (Exception e) {
                    e.printStackTrace();
                }
                if (ik != null) {
                    for (InfraKnowledgeCategory data : ik) {
                        tab = data.getCategoryName();
                        cid = data.getCatId();
                %>
                <li class="nav-item" role="presentation">
                    <button class="nav-link <%=tabIndex==0?"active":"" %>" id="<%=cid%>-tab" data-bs-toggle="tab"
                        data-bs-target="#<%=cid %>-tab-pane" type="button" role="tab"
                        aria-controls="#<%=cid %>-tab-pane" aria-selected="true"><%=tab %></button>
                </li>
                <%tabIndex++; } } %>
            </ul>
            <div class="tab-content accordion" id="myTabContent">
                <%
                for (InfraKnowledgeCategory data : ik) {
                    tabIndex = 0;
                    tab = data.getCategoryName();
                    cid = data.getCatId();
                %>
                <div class="tab-pane fade <%=tabIndex==0?"show active":"" %> accordion-item"
                    id="<%=cid %>-tab-pane" role="tabpanel" aria-labelledby="<%=cid %>-tab"
                    tabindex="<%=cid%>">
                    <h2 class="accordion-header d-lg-none" id="heading<%=cid%>">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse<%=cid %>" aria-expanded="true"
                            aria-controls="collapse<%=cid %>">All</button>
                    </h2>
                    <div id="collapse<%=cid %>" class="accordion-collapse collapse show  d-lg-block"
                        aria-labelledby="heading<%=cid %>" data-bs-parent="#myTabContent">
                        <div class="accordion-body">
                            <div class="filter_form">
                                <div class="row">
                                    <form class="row row-cols-lg-auto align-items-center">
                                        <div class="col-auto">
                                            <label class="form-label"><span class="text-danger">*</span>
                                                Select Subsector</label>
                                            <select class="form-select form-select-sm">
                                                <option selected>All</option>
                                                <%
                                                String options = "";
                                                DynamicQuery dynamicQuery1 = null;
                                                dynamicQuery1 = InfraKnowledgeSubCategoryLocalServiceUtil.dynamicQuery();
                                                dynamicQuery1.add(RestrictionsFactoryUtil.eq("catId", cid));
                                                List<InfraKnowledgeSubCategory> ikc = null;
                                                try {
                                                    ikc = InfraKnowledgeSubCategoryLocalServiceUtil.dynamicQuery(dynamicQuery1, 0,
                                                            InfraKnowledgeSubCategoryLocalServiceUtil.getInfraKnowledgeSubCategoriesCount());
                                                } catch (Exception e) {
                                                    e.printStackTrace();
                                                }
                                                for (InfraKnowledgeSubCategory c1 : ikc) {
                                                    options = c1.getSubCategoryName();
                                                %>
                                                <option value="<%=options%>"><%=options%></option>
                                                <% } %>
                                            </select>
                                        </div>
                                        <div class="col-auto">
                                            <label class="form-label"><span class="text-danger">*</span>
                                                Select Ministry</label>
                                            <select class="form-select form-select-sm">
                                                <option selected>All</option>
                                                <option>Ministry 1</option>
                                                <option>Ministry 2</option>
                                                <option>Ministry 3</option>
                                                <option>Ministry 4</option>
                                            </select>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="section">
                                <h3>CENTRAL POLICIES</h3>
                                <a class="float-end" href="#">View All</a>
                                <div class="owl-carousel owl-theme scroller">
                                    <% 
                                    int imageIndex = 0;
                                    List<InfraKnowledge> ikc1 = null;
                                    String img = "", title = "";
                                    try {
                                        ikc1 = InfraKnowledgeLocalServiceUtil.dynamicQuery();
                                    } catch (Exception e) {
                                        e.printStackTrace();
                                    }
                                    if (ikc1 != null) {
                                        for (InfraKnowledge data1 : ikc1) {
                                            img = data1.getThumbnailUrl();
                                            title = data1.getTitle();
                                    %>
                                    <div class="item <%imageIndex == 0 ? "active" : ""%>">
                                        <div class="img_wrapper">
                                            <img src="<%=img%>" alt="<%=title%>" />
                                        </div>
                                        <div class="text">
                                            <h4><%=title%></h4>
                                            <a href="#">Download</a>
                                        </div>
                                    </div>
                                    <% imageIndex++; } } %>
                                </div>
                            </div>
                            <div class="section">
                                <h3>PPP Document Repository</h3>
                                <a class="float-end" href="#">View All</a>
                                <div class="owl-carousel owl-theme scroller">
                                    <% 
                                    imageIndex = 0;
                                    List<InfraKnowledge> ikc2 = null;
                                    try {
                                        ikc2 = InfraKnowledgeLocalServiceUtil.dynamicQuery();
                                    } catch (Exception e) {
                                        e.printStackTrace();
                                    }
                                    if (ikc2 != null) {
                                        for (InfraKnowledge data2 : ikc2) {
                                            img = data2.getThumbnailUrl();
                                            title = data2.getTitle();
                                    %>
                                    <div class="item <%imageIndex == 0 ? "active" : ""%>">
                                        <div class="img_wrapper">
                                            <img src="<%=img%>" alt="<%=title%>" />
                                        </div>
                                        <div class="text">
                                            <h4><%=title%></h4>
                                            <a href="#">Download</a>
                                        </div>
                                    </div>
                                    <% imageIndex++; } } %>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <% tabIndex++; } %>
            </div>
        </div>
    </section>
</main>
