<!DOCTYPE html>
<html>
<head>
    <title>My Email Template</title>
</head>
<body>
    <h1>Hello [$NAME$],</h1>
    <p>Thank you for registering for the event. Here are the event details:</p>
    <p><strong>Event Name:</strong> [$EVENT_NAME$]</p>
    <p><strong>Venue:</strong> [$VENUE$]</p>
    <!-- You can include more dynamic data here as needed -->
    <img src="cid:logo_image" alt="Event Logo"/>
</body>
</html>


import javax.mail.internet.InternetAddress;
import javax.portlet.PortletRequest;
import com.liferay.mail.kernel.model.MailMessage;
import com.liferay.mail.kernel.service.MailServiceUtil;
import com.liferay.portal.kernel.util.FileUtil;

public class MyPortletUtil {

    public static void sendEmailWithHTMLContent(PortletRequest request, String recipientEmail) {
        try {
            // Get the data from the Portlet, you may have your own logic here
            String name = "John Doe";
            String eventName = "My Event";
            String venue = "Event Venue";
            // Retrieve the image content from the resources folder
            byte[] logoImageData = FileUtil.getBytes(request.getPortletSession().getPortletContext(), "/resources/logo.png");
            
            // Read the email template HTML content
            String htmlContent = FileUtil.read(MyPortletUtil.class.getResourceAsStream("/resources/email_template.html"));
            
            // Replace the placeholders in the HTML content with the dynamic data
            htmlContent = htmlContent.replace("[$NAME$]", name);
            htmlContent = htmlContent.replace("[$EVENT_NAME$]", eventName);
            htmlContent = htmlContent.replace("[$VENUE$]", venue);
            
            // Set up the email details
            InternetAddress fromAddress = new InternetAddress("your_sender_email@example.com");
            InternetAddress toAddress = new InternetAddress(recipientEmail);
            String subject = "Event Registration Confirmation";

            MailMessage mailMessage = new MailMessage();
            mailMessage.setTo(toAddress);
            mailMessage.setFrom(fromAddress);
            mailMessage.setSubject(subject);
            mailMessage.setHTMLFormat(true);
            mailMessage.setBody(htmlContent);
            mailMessage.addFileAttachment("logo_image", logoImageData, "image/png"); // Attach the image

            MailServiceUtil.sendEmail(mailMessage);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
